{"mappings":"8pBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,kJCnBT,IAAAE,EAAAC,EAAA,S,uCAGMC,EAAO,CACXC,UAAWC,SAASC,cAAc,eAClCC,QAASF,SAASC,cAAc,iBAChCE,eAAgBH,SAASC,cAAc,yBACvCG,SAAUJ,SAASC,cAAc,oBAGnCH,EAAKM,SAASC,iBAAiB,QAASC,GACxCR,EAAKI,QAAQG,iBAAiB,SAwBS,SAAfE,GAClBA,EAAMC,SAAWD,EAAME,eACzBH,G,IAxBJ,IAEII,EAFEC,EAAY,IAAI,EAAAC,EAAAC,WAKE,SAAfC,IAC+B,KAAlChB,EAAKK,eAAeY,WACtBC,EAAoBN,GAEtBO,OAAOZ,iBAAiB,UAAWa,GACnCpB,EAAKC,UAAUoB,UAAUC,IAAI,UAC7BtB,EAAKI,QAAQiB,UAAUC,IAAI,S,CAGE,SAAtBd,IACPW,OAAOI,oBAAoB,UAAWH,GACtCpB,EAAKC,UAAUoB,UAAUG,OAAO,UAChCxB,EAAKI,QAAQiB,UAAUG,OAAO,UAC9BxB,EAAKK,eAAeY,UAAY,E,CAWH,SAAtBG,EAAcX,GACF,WAAfA,EAAMgB,MACRjB,G,CAKc,SAATkB,EAAe/B,GACtBiB,EAAUjB,EACVuB,EAAoBvB,E,UAIPuB,EAAoBvB,G,OAApBgC,EAAmBC,MAAAC,KAAAC,U,UAAnBH,I,OAAAA,EAAfI,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAC,EAAmCvC,G,2FAERkB,EAAUsB,aAAaxC,G,OAC9CyC,EADcC,EAAAC,KACiBC,S,gDAE/BC,I,0DAL8BZ,MAAAC,KAAAC,U,CAUG,SAA5BM,EAAsBK,GAC7B,IAUyBC,EACnBC,EAXAC,EAAkBH,EAAOI,MAAK,SAAAC,G,MAAwB,YAAfA,EAAMC,I,IAE/CH,GAQqBF,EAPLE,EAOOF,IACrBC,EAAc,qHAG2BK,OAAJN,EAAI,oOAO/C1C,EAAKK,eAAeY,UAAY0B,GAhB9BH,G,CAoB6C,SAAxCA,IACP,IAAMG,EAAc,iQAK6BK,OAAZjB,EAAAkB,GAAY,+BAGjDjD,EAAKK,eAAeY,UAAY0B,C,uCCpGlCO,EAAAC,QAAiBpD,EAAA,SAAAqD,aAA6C,SAAWrD,EAAA,SAAAsD,QAA6C,Q,sCC8CtH,IAAAC,E,6EA5CA,IAAIC,EAAY,GA6BhB,SAASC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,+DAAiE,MAAQ,G,CAcpGJ,EA1CA,SAA4B3D,GAC1B,IAAIgE,EAAQJ,EAAU5D,GAOtB,OALKgE,IACHA,EAOJ,WACE,IACE,MAAM,IAAI9D,K,CACV,MAAO+D,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,yDAEpC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,G,CAI9B,MAAO,G,CApBGG,GACRT,EAAU5D,GAAMgE,GAGXA,C,KCZT5D,EAAA,SAAAkE,SAA8CC,KAAKC,MAAM,wJ","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/hero-modal.js","node_modules/@parcel/runtime-js/lib/runtime-d2326b2bc40ed207.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-3d209043a4ff28c1.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { MoviesAPI } from './MoviesAPI';\nimport imgForModal from '../images/error.png';\n\nconst refs = {\n  heroModal: document.querySelector('.hero-modal'),\n  overlay: document.querySelector('.hero-overlay'),\n  modalContainer: document.querySelector('.hero-modal-container'),\n  closeBtn: document.querySelector('.hero-close-btn'),\n};\n\nrefs.closeBtn.addEventListener('click', onCloseHeroModal);\nrefs.overlay.addEventListener('click', onClickOverlay);\n\nconst moviesAPI = new MoviesAPI();\n\nlet savedId;\n\n// Відкриття модального вікна\nfunction onOpenHeroModal() {\n  if (refs.modalContainer.innerHTML === '') {\n    getCurrentFilmVideo(savedId);\n  }\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.heroModal.classList.add('active');\n  refs.overlay.classList.add('active');\n}\n// Закриття модального вікна по кнопці\nfunction onCloseHeroModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.heroModal.classList.remove('active');\n  refs.overlay.classList.remove('active');\n  refs.modalContainer.innerHTML = '';\n}\n\n// Закриття модального вікна по кліку на бекдроп\nfunction onClickOverlay(event) {\n  if (event.target === event.currentTarget) {\n    onCloseHeroModal();\n  }\n}\n\n// Закриття модального вікна по кнопці Esc\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    onCloseHeroModal();\n  }\n}\n\n// Отримуємо ID фільму дня\nfunction getFilmOfDayId(id) {\n  savedId = id;\n  getCurrentFilmVideo(id);\n}\n\n// Отримуємо всі відео по фільму\nasync function getCurrentFilmVideo(id) {\n  try {\n    const response = await moviesAPI.getFilmVideo(id);\n    searchOfficialTrailer(response.results);\n  } catch (err) {\n    addBasicHeroModalMarkup();\n  }\n}\n\n// Шукаємо в переліку відео офіційний трейлер\nfunction searchOfficialTrailer(videos) {\n  const OfficialTrailer = videos.find(video => video.type === 'Trailer');\n\n  if (OfficialTrailer) {\n    addTrailerOnModal(OfficialTrailer);\n  } else {\n    addBasicHeroModalMarkup();\n  }\n}\n\n// Якщо знаходить трейлер, додаємо його в модалку\nfunction addTrailerOnModal({ key }) {\n  const modalMarkup = `<iframe class='player'\n        width=\"100%\"\n        height=\"100%\"\n        src=\"https://www.youtube.com/embed/${key}\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n        allowfullscreen\n      ></iframe>`;\n\n  refs.modalContainer.innerHTML = modalMarkup;\n}\n\n// Якщо не знаходить трейлер, відмальовуємо базову розмітку\nfunction addBasicHeroModalMarkup() {\n  const modalMarkup = `<div class=\"hero-modal-box\">\n      <p class=\"hero-modal-text\">OOPS...</p>\n      <p class=\"hero-modal-text\">We are very sorry!</p>\n      <p class=\"hero-modal-text\">But we couldn’t find the trailer.</p>\n    </div>\n    <img class=\"hero-modal-img\" src=\"${imgForModal}\" alt=\"Cinema\" />\n  </div>`;\n\n  refs.modalContainer.innerHTML = modalMarkup;\n}\n\nexport { onOpenHeroModal, getFilmOfDayId };\n","module.exports = require('./helpers/bundle-url').getBundleURL('gYb9y') + require('./helpers/bundle-manifest').resolve(\"a4PEZ\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"gYb9y\\\":\\\"my-library.c4d25d27.js\\\",\\\"a4PEZ\\\":\\\"error.3424b9df.png\\\",\\\"a2wLv\\\":\\\"my-library.ea5af4e5.js\\\"}\"));"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$bpxeT","parcelRequire","$791c06c08af52661$var$refs","heroModal","document","querySelector","overlay","modalContainer","closeBtn","addEventListener","$791c06c08af52661$var$onCloseHeroModal","event","target","currentTarget","$791c06c08af52661$var$savedId","$791c06c08af52661$var$moviesAPI","$dLu6O","MoviesAPI","$791c06c08af52661$export$c09279b9398acccf","innerHTML","$791c06c08af52661$var$getCurrentFilmVideo","window","$791c06c08af52661$var$onEscKeyPress","classList","add","removeEventListener","remove","code","$791c06c08af52661$export$3343e1630c3424a0","$791c06c08af52661$var$_getCurrentFilmVideo","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","getFilmVideo","$791c06c08af52661$var$searchOfficialTrailer","_ctx","sent","results","$791c06c08af52661$var$addBasicHeroModalMarkup","videos","key","modalMarkup","OfficialTrailer","find","video","type","concat","$dYs4R","module","exports","getBundleURL","resolve","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","register","JSON","parse"],"version":3,"file":"my-library.c4d25d27.js.map"}
{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/color-theme.js","src/js/modal.js","src/js/mobile-menu.js","src/js/library.js","src/js/scroll.js","src/js/modal-window/modal-movie.js","node_modules/@parcel/runtime-js/lib/runtime-246d7f17877b7a3f.js","src/js/modal-window/add-to-library.js","src/js/modal-window/remove-from-my-library.js","src/js/catalog-functions/catalog-cards-get.js","src/js/catalog-functions/catalog-genres-get.js","src/data/genres.json","src/js/catalog-functions/catalog-rating-get.js","node_modules/@parcel/runtime-js/lib/runtime-685a3ac3371ab70a.js","src/js/spiner.js","node_modules/@parcel/runtime-js/lib/runtime-bf2799f164c7fa32.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","// function whitemode() {\n//   const body = document.body;\n//   const wasWhitemode = localStorage.getItem('whitemode') === 'true';\n\n//   localStorage.setItem('whitemode', !wasWhitemode);\n//   body.classList.toggle('white-mode');\n// }\n\n// document.querySelector('.switch__input').addEventListener('click', whitemode);\n\n// function onload() {\n//   document.body.classList.toggle('white-mode', localStorage.getItem('whitemode') === 'true');\n// }\n\n// document.addEventListener('DOMContentLoaded', onload);\n\nconst checkBoxEl = document.querySelector('.switch__input');\nlet checkBoxWhitemode = localStorage.getItem('whitemode');\nconst bodyTag = document.body;\n\nfunction whitemode() {\n  if (checkBoxEl.checked) {\n    localStorage.setItem('whitemode', 'true');\n    bodyTag.classList.add('white-mode');\n  } else {\n    localStorage.setItem('whitemode', 'false');\n    bodyTag.classList.remove('white-mode');\n  }\n}\n\ncheckBoxEl.addEventListener('click', whitemode);\n\nfunction onload() {\n  if (checkBoxWhitemode === 'true') {\n    checkBoxEl.checked = true;\n    bodyTag.classList.add('white-mode');\n  } else {\n    checkBoxEl.checked = false;\n    bodyTag.classList.remove('white-mode');\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', onload);\n","(function (e) {\n  'function' != typeof e.matches &&\n    (e.matches =\n      e.msMatchesSelector ||\n      e.mozMatchesSelector ||\n      e.webkitMatchesSelector ||\n      function (e) {\n        for (\n          let t = this, o = (t.document || t.ownerDocument).querySelectorAll(e), n = 0;\n          o[n] && o[n] !== t;\n\n        )\n          ++n;\n        return Boolean(o[n]);\n      }),\n    'function' != typeof e.closest &&\n      (e.closest = function (e) {\n        for (let t = this; t && 1 === t.nodeType; ) {\n          if (t.matches(e)) return t;\n          t = t.parentNode;\n        }\n        return null;\n      });\n})(window.Element.prototype);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  /* Записываем в переменные массив элементов-кнопок и подложку.\n       Подложке зададим id, чтобы не влиять на другие элементы с классом overlay*/\n  let modalButtons = document.querySelectorAll('.js-open-modal'),\n    overlay = document.querySelector('.js-overlay-modal'),\n    closeButtons = document.querySelectorAll('.js-modal-close');\n\n  /* Перебираем массив кнопок */\n  modalButtons.forEach(function (item) {\n    /* Назначаем каждой кнопке обработчик клика */\n    item.addEventListener('click', function (e) {\n      /* Предотвращаем стандартное действие элемента. Так как кнопку разные\n             люди могут сделать по-разному. Кто-то сделает ссылку, кто-то кнопку.\n             Нужно подстраховаться. */\n      e.preventDefault();\n\n      /* При каждом клике на кнопку мы будем забирать содержимое атрибута data-modal\n             и будем искать модальное окно с таким же атрибутом. */\n      let modalId = this.getAttribute('data-modal'),\n        modalElem = document.querySelector('.modal[data-modal=\"' + modalId + '\"]');\n\n      /* После того как нашли нужное модальное окно, добавим классы\n             подложке и окну чтобы показать их. */\n      modalElem.classList.add('active');\n      overlay.classList.add('active');\n    }); // end click\n  }); // end foreach\n\n  closeButtons.forEach(function (item) {\n    item.addEventListener('click', function (e) {\n      let parentModal = this.closest('.modal');\n\n      parentModal.classList.remove('active');\n      overlay.classList.remove('active');\n    });\n  }); // end foreach\n\n  document.body.addEventListener(\n    'keyup',\n    function (e) {\n      let key = e.keyCode;\n\n      if (key == 27) {\n        let activeModal = document.querySelector('.modal.active');\n        if (activeModal) {\n          activeModal.classList.remove('active');\n        }\n\n        let activeOverlay = document.querySelector('.overlay.active');\n        if (activeOverlay) {\n          activeOverlay.classList.remove('active');\n        }\n      }\n    },\n    false\n  );\n\n  overlay.addEventListener('click', function () {\n    document.querySelector('.modal.active').classList.remove('active');\n    this.classList.remove('active');\n  });\n}); // end ready\n","(() => {\n  const refs = {\n    openMenuBtn: document.querySelector('.menu-open-btn'),\n    // closeMenuBtn: document.querySelector('.menu-close-btn'),\n    menu: document.querySelector('.mob-menu'),\n    body: document.querySelector('body'),\n  };\n  refs.openMenuBtn.addEventListener('click', toggleMenu);\n\n  function toggleMenu() {\n    refs.menu.classList.toggle('is-hidden');\n    refs.body.classList.toggle('no-scroll');\n    refs.body.classList.toggle('has-backdrop');\n  }\n})();\n","import { onScroll, onToTopBtn } from './scroll';\n\nonScroll();\nonToTopBtn();\n\n//добавить импорт модалки..\nimport { openModalMovie } from './modal-window/modal-movie';\n\n// import { addAndRemoveToLocalStorage, getFromStorage } from './localStorage';\n// import { createUpcomingMovies } from './catalog-functions/upcoming-markup';\nimport { getCatalogCards } from './catalog-functions/catalog-cards-get';\n// import { formToJSON } from 'axios';\n// export {  };\n// function addMovieToLibrary(movieId) {\n//   getMovieById2(movieId).then(movie => {\n//     movie.genre_names = movie.genres\n//       .map(genre => {\n//         return genre.name;\n//       })\n//       .slice(0, 2)\n//       .join(',');\n//     if (movie.release_date) {\n//       movie.release_date = movie.release_date.slice(0, 4);\n//     }\n//     let libraries = JSON.parse(localStorage.getItem(librariesKey));\n//     if (!libraries) {\n//       libraries = {};\n//     }\n//     libraries[movie.id] = movie;\n//     localStorage.setItem(librariesKey, JSON.stringify(libraries));\n//   });\n// }\n\n// function removeMovieFromLibrary(movieId) {\n//   let libraries = JSON.parse(localStorage.getItem(librariesKey));\n//   delete libraries[movieId];\n//   localStorage.setItem(librariesKey, JSON.stringify(libraries));\n// }\n\nexport async function onRenderLibraryCards() {\n  const moviesContainer = document.querySelector('.library-list');\n  let savedMovies = JSON.parse(localStorage.getItem('libraryFilm')) || [];\n  // console.log(savedMovies);\n\n  if (savedMovies.length > 0) {\n    const moviesMarkUp = await getCatalogCards(savedMovies);\n    // console.log(moviesMarkUp);\n    moviesContainer.innerHTML = moviesMarkUp;\n\n    // Встановлюємо слухача на всі посилання карток товарів\n    const links = document.querySelectorAll('.catalog-list__list-link');\n    links.forEach(link => {\n      link.addEventListener('click', event => {\n        event.preventDefault();\n        openModalMovie(link.dataset.id);\n      });\n    });\n  } else {\n    // console.log('Бачу ЕЛС');\n    return (moviesContainer.innerHTML = `<div class=\"container library-container-mistake\">\n      <p class=\"library-empty__mistake\">OOPS... <br> We are very sorry! <br> You don't have any movies at your library.</p>\n      <button class=\"btn btn-library\" onclick=\"window.location.href='catalog.html'\"><a class=\"btn-library__link\">Search movie</a></button>\n    </div>`);\n  }\n}\n\nonRenderLibraryCards();\n\n// const librariesKey = 'libraryFilm';\n// let page = 1;\n// let perPage = 9;\n\n// const loadMoreBtn = document.querySelector('.btn-load-more');\n\n// loadMoreBtn.addEventListener('click', () => {\n//   page += 1;\n//   onRenderLibraryCards();\n// });\n\n// loadMoreBtn.classList.remove('is-hidden');\n// if (allMovies.length > page * perPage) {\n//   loadMoreBtn.classList.add('is-hidden');\n// }\n// return markup;\n// if (perPage < 9) {\n//   loadMoreBtn.classList.add('is-hidden');\n//   return;\n// }\n\n// loadMoreBtn.classList.remove('is-hidden');\n","export { onScroll, onToTopBtn };\n\nconst toTopBtn = document.querySelector('.go-to-top');\n\ntoTopBtn.addEventListener('click', onToTopBtn);\nwindow.addEventListener('scroll', onScroll);\n\nfunction onScroll() {\n  const scrolled = window.pageYOffset;\n  // const coords = document.documentElement.clientHeight;\n\n  if (scrolled > 400) {\n    toTopBtn.classList.add('go-to-top--visible');\n  }\n  if (scrolled < 400) {\n    toTopBtn.classList.remove('go-to-top--visible');\n  }\n}\n\nfunction onToTopBtn() {\n  if (window.pageYOffset > 0) {\n    window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });\n  }\n}\n","import symboldefs from '../../images/symbol-defs.svg';\nimport { MoviesAPI } from '../MoviesAPI';\nimport { addToLibrary } from './add-to-library';\nimport { removeFromLibrary } from './remove-from-my-library';\nimport { onRenderLibraryCards } from '../library';\n\nconst modalEl = document.querySelector('.modal-card');\n\nconst backdropEl = document.createElement('div');\nbackdropEl.classList.add('modal-backdrop');\ndocument.body.appendChild(backdropEl);\n\nexport async function openModalMovie(id) {\n  const moviesAPI = new MoviesAPI();\n\n  try {\n    const response = await moviesAPI.getMovieDetails(id);\n    modalEl.classList.add('modal-movie--show');\n    backdropEl.classList.add('backdrop--show');\n    document.body.classList.add('modal-open');\n    modalEl.innerHTML = `\n     <svg class=\"close-btn js-modal-close\" type=\"button\">\n    <use href=\"${symboldefs}#close-outline\"></use>\n     </svg>\n      <div class=\"modal__card\">\n      <div class=\"modal-card__wrapper\">\n        <img class=\"modal-poster\" src=\"https://image.tmdb.org/t/p/w500${response.data.poster_path}\" alt=\"${response.data.title}\" width=\"248\" height=\"315\">\n        <div class=\"modal-container__info\">\n          <h2 class=\"modal-title\">${response.data.original_title}</h2>\n          <div class=\"modal-container__details\">\n  <ul class=\"modal-details__list list\">\n    <li class=\"modal-details__item\">Vote / Votes</li>\n    <li class=\"modal-details__item\">Popularity</li>\n    <li class=\"modal-details__item\">Genre</li>\n  </ul>\n  <ul class=\"modal-details__value-list list\">\n    <li class=\"modal-details__value\">\n      <span class=\"vote\">${response.data.vote_average}</span>\n      <span class=\"slash\">/</span>\n      <span class=\"vote\">${response.data.vote_count}</span>\n    </li>\n    <li class=\"modal-details__value\">${response.data.popularity}</li>\n    <li class=\"modal-details__value\">${response.data.genres[0].name}</li>\n  </ul>\n</div>\n\n            <p class=\"modal-details__about\">ABOUT</p>\n            <p class=\"modal-details__story\">${response.data.overview}</p>\n          \n          <button class=\"btn-add-remove\">Add to my library</button>\n          <button class=\"watch-btn-modal\">Watch trailer</button>\n        </div>\n      </div>\n      </div>\n    `;\n\n    // Функція виклику функції для додавання / видалення кнопок / фільму з локального сховища-----------------------------------------\n\n    function modalButtonCreation() {\n      const addRemoveLibraryButton = document.querySelector('.btn-add-remove');\n      const movieObject = response.data;\n\n      let libraryFilms = JSON.parse(localStorage.getItem('libraryFilm')) || [];\n      // console.log(`movieObject`, movieObject);\n      // console.log(libraryFilms.flat());\n\n      if (libraryFilms.flat().some(value => value.id === movieObject.id)) {\n        // console.log('Фільм є в Locale Storage');\n        // console.log('Нова назва кнопки + слухач з функцією видалення.');\n        addRemoveLibraryButton.textContent = 'Remove from library';\n        addRemoveLibraryButton.classList.add('remove');\n        addRemoveLibraryButton.addEventListener('click', function () {\n          removeFromLibrary(movieObject.id);\n          // console.log('Видалили з Locale Storage.');\n          // Якщо ми на сторінці my-library - запускаємо новий рендер сторінки onRenderLibraryCards()\n          if (window.location.pathname.includes('my-library')) {\n            // console.log('My-library is OPENED');\n            onRenderLibraryCards();\n          }\n          modalButtonCreation();\n        });\n      } else {\n        // console.log('Фільму немає в Locale Storage');\n        // console.log('Нова назва кноки іслухач з функцію додавання');\n        addRemoveLibraryButton.textContent = 'Add to library';\n        addRemoveLibraryButton.classList.remove('remove');\n        addRemoveLibraryButton.addEventListener('click', function () {\n          addToLibrary(movieObject);\n          // console.log(`movieObject (from modal-movie.js)`, movieObject);\n          // console.log('Вийшов з функції додавання Locale Storage', movieObject);\n          // Якщо ми на сторінці my-library - запускаємо новий рендер сторінки onRenderLibraryCards()\n          if (window.location.pathname.includes('my-library')) {\n            // console.log('My-library is OPENED');\n            onRenderLibraryCards();\n          }\n          modalButtonCreation();\n        });\n      }\n    }\n    modalButtonCreation();\n    // -----------------------------------------------------------------------------------------\n\n    const closeModalBtn = modalEl.querySelector('.js-modal-close');\n    closeModalBtn.addEventListener('click', closeModal);\n    backdropEl.addEventListener('click', closeModal);\n\n    document.addEventListener('keydown', event => {\n      if (event.keyCode === 27) {\n        closeModal();\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function closeModal() {\n  modalEl.classList.remove('modal-movie--show');\n  modalEl.innerHTML = '';\n  backdropEl.classList.remove('backdrop--show');\n  document.body.classList.remove('modal-open');\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9v6fF\")).toString();","export function addToLibrary(movieObject) {\n  // Отримати поточний список фільмів з Locale Storage\n  let libraryFilms = JSON.parse(localStorage.getItem('libraryFilm')) || [];\n  // Всі консоль логи нижче праюють тільки тоді, коли в\n  // console.log(`libraryFilms: `, libraryFilms);\n  // console.log(`libraryFilms.flat(): `, libraryFilms.flat());\n  // console.log(`libraryFilms[0].id: `, libraryFilms[0].id);\n  // console.log(`movieObject: `, movieObject);\n  // Перевірка чи такого фільму ще немає в Locale Storage\n  if (libraryFilms.flat().some(value => value.id === movieObject.id)) {\n    // Якщо фільм вже є, тоді поки що нічого не робимо\n    // console.log('Фільм вже додано в Locale Storage');\n    return;\n  } else {\n    // console.log('Такого фільму ще немає в Locale Storage, додаємо');\n    // Додаємо новий запис до масиву.\n    libraryFilms.push(movieObject);\n    // console.log(`movieObject: `, movieObject);\n    // console.log('libraryFilms: ', libraryFilms);\n  }\n  // Зберегти оновлений список фільмів у Locale Storage\n  localStorage.setItem('libraryFilm', JSON.stringify(libraryFilms));\n}\n","export function removeFromLibrary(movieId) {\n  //   console.log('Функція видалення фільму з локального сховища');\n  // Отримати поточний список фільмів з локального сховища\n  let libraryFilms = JSON.parse(localStorage.getItem('libraryFilm')) || [];\n  //   console.log(movieId);\n  //   console.log(libraryFilms.flat());\n  // Видаляємо запис з libraryFilms по ІД фільму\n  libraryFilms = libraryFilms.flat().filter(value => value.id !== movieId);\n  // console.log(libraryFilms);\n  // Зберегти оновлений список фільмів у локальному сховищі\n  localStorage.setItem('libraryFilm', JSON.stringify(libraryFilms));\n}\n","import { getGenres } from './catalog-genres-get';\nimport { getStarsRating } from './catalog-rating-get';\nimport posterNoPhoto from '/src/images/nophoto.jpg';\n\nexport function getCatalogCards(backendQuery) {\n  const catalogCardsMarkup = backendQuery\n\n    .map(\n      ({\n        title,\n        genre_ids,\n        genres,\n        release_date,\n        vote_average,\n        poster_path,\n        id,\n      }) => {\n        if (poster_path) {\n          poster_path = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        } else {\n          poster_path = posterNoPhoto;\n        }\n        const genreNames = Array.isArray(genres)\n          ? genres\n              .slice(0, 2)\n              .map(genre => genre.name)\n              .join(', ')\n          : getGenres(genre_ids);\n        return `\n    <li class='catalog-list__item'>\n        <a href='#' class='catalog-list__list-link' data-id=\"${id}\" data-modal=\"movie-card\">\n            <div class='catalog-list__list-wrapper'>\n                <div class='catalog-list__info'>\n                    <h2 class='catalog-list__title'>${title}</h2>\n                    <div class='catalog-list__additional-info'>\n                        <p class='catalog-list__movie-type'>${genreNames} | ${release_date.slice(\n          0,\n          4\n        )}</p>\n                        <div class='catalog-list-rating'>${getStarsRating(\n                          vote_average\n                        )}\n                        </div>\n                    </div>\n                </div>\n                <img\n                    src='${poster_path}'\n                    alt='${title}'\n                    width='280'\n                    height='406'\n                    class='catalog-list__image'\n                />\n            </div>\n        </a>\n    </li> `;\n      }\n    )\n    .join('');\n  // console.log(catalogCardsMarkup);\n  return catalogCardsMarkup;\n}\n","import genresFromLocaleFile from '/src/data/genres.json'; // Це локальний json з жанрами фільмів\n\n// Функція отримання жанрів з файлу '/src/data/genres.json\nexport function getGenres(ids) {\n  const genresLocalList = genresFromLocaleFile.genres;\n  //   console.log(genresLocalList[0].name);\n\n  const genres = genresLocalList.filter(genre => ids.includes(genre.id));\n  //   console.log(genres);\n\n  const genresNames = genres\n    .slice(0, 2)\n    .map(genre => genre.name)\n    .join(', ');\n  // console.log(genresNames);\n\n  return genresNames;\n}\n\n// import { MoviesAPI } from '../MoviesAPI';\n// export const moviesAPI = new MoviesAPI();\n\n// // Функція отримання жанрів з АПІ\n// export async function getGenres(ids) {\n//   try {\n//     const genresFromApi = await moviesAPI.getGenresList();\n//     // console.log(genresFromApi.data.genres);\n//     const genres = genresFromApi.data.genres.filter(genre =>\n//       ids.includes(genre.id)\n//     );\n//     let genresText = '';\n//     // console.log(genres.length);\n//     if (genres.length > 1) {\n//       genresText = `${genres[0].name}, ${genres[1].name}`;\n//     } else {\n//       genresText = `${genres[0].name}`;\n//     }\n//     console.log(genresText);\n//     return genresText;\n//   } catch (err) {\n//     console.log(err); // В консоль потрапляє, а в список фільмів ні\n//   }\n// }\n","{\n  \"genres\": [\n    { \"id\": 28, \"name\": \"Action\" },\n    { \"id\": 12, \"name\": \"Adventure\" },\n    { \"id\": 16, \"name\": \"Animation\" },\n    { \"id\": 35, \"name\": \"Comedy\" },\n    { \"id\": 80, \"name\": \"Crime\" },\n    { \"id\": 99, \"name\": \"Documentary\" },\n    { \"id\": 18, \"name\": \"Drama\" },\n    { \"id\": 10751, \"name\": \"Family\" },\n    { \"id\": 14, \"name\": \"Fantasy\" },\n    { \"id\": 36, \"name\": \"History\" },\n    { \"id\": 27, \"name\": \"Horror\" },\n    { \"id\": 10402, \"name\": \"Music\" },\n    { \"id\": 9648, \"name\": \"Mystery\" },\n    { \"id\": 10749, \"name\": \"Romance\" },\n    { \"id\": 878, \"name\": \"Science Fiction\" },\n    { \"id\": 10770, \"name\": \"TV Movie\" },\n    { \"id\": 53, \"name\": \"Thriller\" },\n    { \"id\": 10752, \"name\": \"War\" },\n    { \"id\": 37, \"name\": \"Western\" }\n  ]\n}\n","export function getStarsRating(vote_average) {\n  let vote = [];\n  if (vote_average >= 9.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'active',\n        fourthStar: 'active',\n        fifthStar: 'active',\n      },\n    ]);\n  } else if (vote_average >= 8.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'active',\n        fourthStar: 'active',\n        fifthStar: 'activehalf',\n      },\n    ]);\n  } else if (vote_average >= 7.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'active',\n        fourthStar: 'active',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else if (vote_average >= 6.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'active',\n        fourthStar: 'activehalf',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else if (vote_average >= 5.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'active',\n        fourthStar: 'noactive',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else if (vote_average >= 4.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'activehalf',\n        fourthStar: 'noactive',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else if (vote_average >= 3.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'active',\n        thirdStar: 'noactive',\n        fourthStar: 'noactive',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else if (vote_average >= 2.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'active',\n        secondStar: 'activehalf',\n        thirdStar: 'noactive',\n        fourthStar: 'noactive',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else if (vote_average < 1.5) {\n    vote = renderStarsList([\n      {\n        firstStar: 'activehalf',\n        secondStar: 'noactive',\n        thirdStar: 'noactive',\n        fourthStar: 'noactive',\n        fifthStar: 'noactive',\n      },\n    ]);\n  } else {\n    vote = 'Помилка: проблема у файлі catalog-rating-get.js';\n  }\n  // console.log(vote);\n  return vote;\n}\n\nfunction renderStarsList(vote) {\n  const starsMarkup = vote\n    .map(({ firstStar, secondStar, thirdStar, fourthStar, fifthStar }) => {\n      return `\n      <ul class=\"catalog-list-rating__list\">\n        <li class=\"catalog-list-rating__list-item--${firstStar}\"></li>\n        <li class=\"catalog-list-rating__list-item--${secondStar}\"></li>\n        <li class=\"catalog-list-rating__list-item--${thirdStar}\"></li>\n        <li class=\"catalog-list-rating__list-item--${fourthStar}\"></li>\n        <li class=\"catalog-list-rating__list-item--${fifthStar}\"></li>\n      </ul>\n          `;\n    })\n    .join('');\n  // console.log(starsMarkup);\n  return starsMarkup;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bLTxm\")).toString();","function renderSpiner() {\n  const film = document.querySelector('.films');\n  const spiner = document.createElement('div');\n  spiner.classList.add('loader');\n  spiner.textContent = 'Loading...';\n  film.prepend(spiner);\n\n  setTimeout(() => spiner.remove(), 400);\n}\n\nrenderSpiner();\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9uqmG\\\":\\\"my-library.31d7d0cc.js\\\",\\\"9v6fF\\\":\\\"symbol-defs.2be55a3b.svg\\\",\\\"bLTxm\\\":\\\"nophoto.d3be914e.jpg\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$79a1a6b1c70b2264$var$checkBoxEl","document","querySelector","$79a1a6b1c70b2264$var$checkBoxWhitemode","localStorage","getItem","$79a1a6b1c70b2264$var$bodyTag","body","addEventListener","checked","setItem","classList","add","remove","e1","window","Element","prototype","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","e","t","this","o1","ownerDocument","querySelectorAll","n1","Boolean","o","n","closest","nodeType","parentNode","overlay","closeButtons","modalButtons","forEach","item","modalId","keyCode","activeModal","activeOverlay","refs","openMenuBtn","menu","toggle","$2YGUk","parcelRequire","async","$1cafa503bc57b7a0$export$f3ed255e03a91070","moviesContainer","savedMovies","JSON","parse","innerHTML","moviesMarkUp","$7TXbz","getCatalogCards","link","event","preventDefault","$cuRSp","openModalMovie","dataset","onScroll","onToTopBtn","$22b277e67ad1df42$var$toTopBtn","$22b277e67ad1df42$export$d4d89fd61e5416ee","scrolled","pageYOffset","$22b277e67ad1df42$export$4ad3adb70a9fd3fe","scrollTo","top","left","behavior","$1rJhf","$9192141e6d70223f$var$modalEl","$9192141e6d70223f$var$backdropEl","createElement","$9192141e6d70223f$export$3c9e96c8bb4f4ee4","moviesAPI","$jtGqB","MoviesAPI","response","getMovieDetails","$parcel$interopDefault","data","poster_path","title","original_title","vote_average","vote_count","popularity","genres","name","overview","modalButtonCreation","addRemoveLibraryButton","movieObject","flat","some","value","textContent","$cCmwW","removeFromLibrary","location","pathname","includes","$2sH7u","onRenderLibraryCards","$7aCER","addToLibrary","$9192141e6d70223f$export$3f6fecd573f3fa48","error","console","log","appendChild","module","exports","URL","resolve","import","meta","url","toString","$538774413e17fdd8$export$c8b00602aa21f122","libraryFilms","push","stringify","$92fa82b52ff1a86e$export$acfc7dc7ffc23978","movieId","filter","$horRP","$5c0b947b13cfe561$export$70db69f8a333b830","backendQuery","map","genre_ids","release_date","$fpijP","Array","isArray","slice","genre","join","getGenres","$1fLxG","getStarsRating","$2j7ES","$ca9a4b6270bdd218$export$c5604fa8028da00","ids","$0e9c1210359cb1b8$export$41a923085f61d39d","vote","$0e9c1210359cb1b8$var$renderStarsList","firstStar","secondStar","thirdStar","fourthStar","fifthStar","film","spiner","prepend","setTimeout","$ef807b158639a780$var$renderSpiner","register"],"version":3,"file":"my-library.31d7d0cc.js.map"}
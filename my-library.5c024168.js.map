{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,kJCnBT,IAAAE,EAAAC,EAAA,S,aAGA,MAAMC,EAAO,CACXC,UAAWC,SAASC,cAAc,eAClCC,QAASF,SAASC,cAAc,iBAChCE,eAAgBH,SAASC,cAAc,yBACvCG,SAAUJ,SAASC,cAAc,oBAGnCH,EAAKM,SAASC,iBAAiB,QAASC,GACxCR,EAAKI,QAAQG,iBAAiB,SAwBS,SAAfE,GAClBA,EAAMC,SAAWD,EAAME,eACzBH,G,IAxBJ,MAAMI,EAAY,IAAI,EAAAd,EAAAe,WAEtB,IAAIC,EAGoB,SAAfC,IAC+B,KAAlCf,EAAKK,eAAeW,WACtBC,EAAoBH,GAEtBI,OAAOX,iBAAiB,UAAWY,GACnCnB,EAAKC,UAAUmB,UAAUC,IAAI,UAC7BrB,EAAKI,QAAQgB,UAAUC,IAAI,S,CAGE,SAAtBb,IACPU,OAAOI,oBAAoB,UAAWH,GACtCnB,EAAKC,UAAUmB,UAAUG,OAAO,UAChCvB,EAAKI,QAAQgB,UAAUG,OAAO,UAC9BvB,EAAKK,eAAeW,UAAY,E,CAWH,SAAtBG,EAAcV,GACF,WAAfA,EAAMe,MACRhB,G,CAKc,SAATiB,EAAe9B,GACtBmB,EAAUnB,EACVsB,EAAoBtB,E,CAIG+B,eAAVT,EAAoBtB,GACjC,KASmC,SAANgC,GAC7B,MAAMC,EAAkBD,EAAOE,MAAKC,GAAwB,YAAfA,EAAMC,OAE/CH,EAQiC,UAAZI,IAAEA,IAC3B,MAAMC,EAAc,mHAGuBD,oOAO3ChC,EAAKK,eAAeW,UAAYiB,C,CAlB9BC,CAAkBN,GAElBO,G,CAbAC,QADuBxB,EAAUyB,aAAa1C,IACf2C,Q,CAC/B,MAAOC,GACPJ,G,EA+B6C,SAAxCA,IACP,MAAMF,EAAc,iQAKiBO,EAAAC,gCAGrCzC,EAAKK,eAAeW,UAAYiB,C,uCCpGlCS,EAAAC,QAAiB,IAAAC,IAAoB7C,EAAA,SAAA8C,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,U,ICA5FlD,EAAA,SAAAmD,SAA8CC,KAAKC,MAAM,wJ","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/hero-modal.js","node_modules/@parcel/runtime-js/lib/runtime-e6b8fe0dd3fa9f6f.js","node_modules/@parcel/runtime-js/lib/runtime-008d3088961932f8.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { MoviesAPI } from './MoviesAPI';\nimport imgForModal from '../images/error.png';\n\nconst refs = {\n  heroModal: document.querySelector('.hero-modal'),\n  overlay: document.querySelector('.hero-overlay'),\n  modalContainer: document.querySelector('.hero-modal-container'),\n  closeBtn: document.querySelector('.hero-close-btn'),\n};\n\nrefs.closeBtn.addEventListener('click', onCloseHeroModal);\nrefs.overlay.addEventListener('click', onClickOverlay);\n\nconst moviesAPI = new MoviesAPI();\n\nlet savedId;\n\n// Відкриття модального вікна\nfunction onOpenHeroModal() {\n  if (refs.modalContainer.innerHTML === '') {\n    getCurrentFilmVideo(savedId);\n  }\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.heroModal.classList.add('active');\n  refs.overlay.classList.add('active');\n}\n// Закриття модального вікна по кнопці\nfunction onCloseHeroModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.heroModal.classList.remove('active');\n  refs.overlay.classList.remove('active');\n  refs.modalContainer.innerHTML = '';\n}\n\n// Закриття модального вікна по кліку на бекдроп\nfunction onClickOverlay(event) {\n  if (event.target === event.currentTarget) {\n    onCloseHeroModal();\n  }\n}\n\n// Закриття модального вікна по кнопці Esc\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    onCloseHeroModal();\n  }\n}\n\n// Отримуємо ID фільму дня\nfunction getFilmOfDayId(id) {\n  savedId = id;\n  getCurrentFilmVideo(id);\n}\n\n// Отримуємо всі відео по фільму\nasync function getCurrentFilmVideo(id) {\n  try {\n    const response = await moviesAPI.getFilmVideo(id);\n    searchOfficialTrailer(response.results);\n  } catch (err) {\n    addBasicHeroModalMarkup();\n  }\n}\n\n// Шукаємо в переліку відео офіційний трейлер\nfunction searchOfficialTrailer(videos) {\n  const OfficialTrailer = videos.find(video => video.type === 'Trailer');\n\n  if (OfficialTrailer) {\n    addTrailerOnModal(OfficialTrailer);\n  } else {\n    addBasicHeroModalMarkup();\n  }\n}\n\n// Якщо знаходить трейлер, додаємо його в модалку\nfunction addTrailerOnModal({ key }) {\n  const modalMarkup = `<iframe class='player'\n        width=\"100%\"\n        height=\"100%\"\n        src=\"https://www.youtube.com/embed/${key}\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n        allowfullscreen\n      ></iframe>`;\n\n  refs.modalContainer.innerHTML = modalMarkup;\n}\n\n// Якщо не знаходить трейлер, відмальовуємо базову розмітку\nfunction addBasicHeroModalMarkup() {\n  const modalMarkup = `<div class=\"hero-modal-box\">\n      <p class=\"hero-modal-text\">OOPS...</p>\n      <p class=\"hero-modal-text\">We are very sorry!</p>\n      <p class=\"hero-modal-text\">But we couldn’t find the trailer.</p>\n    </div>\n    <img class=\"hero-modal-img\" src=\"${imgForModal}\" alt=\"Cinema\" />\n  </div>`;\n\n  refs.modalContainer.innerHTML = modalMarkup;\n}\n\nexport { onOpenHeroModal, getFilmOfDayId };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ckgan\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"8XWCV\\\":\\\"my-library.5c024168.js\\\",\\\"ckgan\\\":\\\"error.3424b9df.png\\\",\\\"dc7im\\\":\\\"my-library.4dfab853.js\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$jtGqB","parcelRequire","$0d7ebe86bac0388d$var$refs","heroModal","document","querySelector","overlay","modalContainer","closeBtn","addEventListener","$0d7ebe86bac0388d$var$onCloseHeroModal","event","target","currentTarget","$0d7ebe86bac0388d$var$moviesAPI","MoviesAPI","$0d7ebe86bac0388d$var$savedId","$0d7ebe86bac0388d$export$c09279b9398acccf","innerHTML","$0d7ebe86bac0388d$var$getCurrentFilmVideo","window","$0d7ebe86bac0388d$var$onEscKeyPress","classList","add","removeEventListener","remove","code","$0d7ebe86bac0388d$export$3343e1630c3424a0","async","videos","OfficialTrailer","find","video","type","key","modalMarkup","$0d7ebe86bac0388d$var$addTrailerOnModal","$0d7ebe86bac0388d$var$addBasicHeroModalMarkup","$0d7ebe86bac0388d$var$searchOfficialTrailer","getFilmVideo","results","err","$parcel$interopDefault","$fQLeO","module","exports","URL","resolve","import","meta","url","toString","register","JSON","parse"],"version":3,"file":"my-library.5c024168.js.map"}